# 메인 컴포넌트3 | Broadcast Receiver

> Broadcast Receiver 특징
- UI가 없이 백그라운드 작업 수행
- 묵시적 활성화의 경우, manifest 파일에 등록없이 직접 객체 생성해서 사용 가능
- 해당 경우에는 intent filter를 직접 생성하여 묵시적 활성화 조건을 설정할 수 있음

> Broadcast Receiver의 생명주기 메서드
- onReceive()
백그라운드에서 자신을 호출할 때를 기다리다가 호출이 되면 메세지가 포함된 인텐트를 파라메터로 전달 <br/>
![image](https://user-images.githubusercontent.com/62331803/90577994-26135c80-e1fd-11ea-8f81-e319a2cb1a75.png)
<br/>

> manifest.xml 확인
```xml
        <receiver
            android:name=".MyReceiver"  
            android:enabled="true"  //리시버 호출 가능 여부
            android:exported="true"> //리시버 추출 가능 여부
        </receiver>
 ```
 
 ## Broadcast Receiver 활용예제 | 명시적/묵시적 호출
 > activity_main
 
 ![image](https://user-images.githubusercontent.com/62331803/90579171-25c89080-e200-11ea-9191-2caee608b10d.png)
 <br/>
 
 > MainActivity.java
 ```java
package com.example.receivertest;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends AppCompatActivity {
    // 묵시적 호출에서 사용할 문자열 상수
    private final String ACTION = "com.example.receivertest.MyAction";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // receiver가 실행이 되면 filter 설정이 되게끔. (자원낭비를 막음)
        MyReceiver2 br = new MyReceiver2();
        IntentFilter filter = new IntentFilter();
        filter.addAction(ACTION);
        registerReceiver(br, filter);
    }

    public void onBtn1(View view){
        Intent intent = new Intent(this, MyReceiver.class);
        intent.putExtra("str","yez");
        intent.putExtra("num","122");
        sendBroadcast(intent);
    }

    public void onBtn2(View view){
        //private final String ACTION = "com.example.receivertest.MyAction";
        Intent intent = new Intent(ACTION);//intent filter에 해당이름으로 등록된 것을 깨우겠다.
        sendBroadcast(intent);
    }
}
 ```
 
 > [명시적 활성화] MyReceiver.java (new -> other-> Broadcast Receiver)
 ```java
 package com.example.receivertest;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class MyReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO: This method is called when the BroadcastReceiver is receiving
        // an Intent broadcast.
        String str = intent.getStringExtra("str");
        int num = intent.getIntExtra("num",0);
        Toast.makeText(context,str+"/num:"+num,Toast.LENGTH_SHORT).show();
    }
} 
 ```

> [묵시적 활성화] MyReceiver2.java 
 ```java
 package com.example.receivertest;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class MyReceiver2 extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO: This method is called when the BroadcastReceiver is receiving
        // an Intent broadcast.
        Toast.makeText(context,"리시버 묵시적 활성화",Toast.LENGTH_SHORT).show();
    }
}
 ```
> 결과화면 <br/>

![image](https://user-images.githubusercontent.com/62331803/90579892-54476b00-e202-11ea-9dbd-35330e237dd3.png)
